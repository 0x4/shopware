(function(){var f=tinymce.DOM;tinymce.create('tinymce.plugins.FullScreenPlugin',{init:function(c,d){var t=this,s={},vp,posCss;t.editor=c;c.addCommand('mceFullScreen',function(){var b,de=f.doc.documentElement;if(c.getParam('fullscreen_is_enabled')){if(c.getParam('fullscreen_new_window')){closeFullscreen()}else{f.win.setTimeout(function(){var a=tinyMCE.activeEditor,undoManager=a.undoManager;undoManager.add();tinymce.dom.Event.remove(f.win,'resize',t.resizeFunc);tinyMCE.get(c.getParam('fullscreen_editor_id')).setContent(c.getContent());tinyMCE.remove(c);f.remove('mce_fullscreen_container');de.style.overflow=c.getParam('fullscreen_html_overflow');f.setStyle(f.doc.body,'overflow',c.getParam('fullscreen_overflow'));f.win.scrollTo(c.getParam('fullscreen_scrollx'),c.getParam('fullscreen_scrolly'));tinyMCE.settings=tinyMCE.oldSettings},10)}return}if(c.getParam('fullscreen_new_window')){b=f.win.open(d+"/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+screen.availWidth+",height="+screen.availHeight);try{b.resizeTo(screen.availWidth,screen.availHeight)}catch(e){}}else{tinyMCE.oldSettings=tinyMCE.settings;s.fullscreen_overflow=f.getStyle(f.doc.body,'overflow',1)||'auto';s.fullscreen_html_overflow=f.getStyle(de,'overflow',1);vp=f.getViewPort();s.fullscreen_scrollx=vp.x;s.fullscreen_scrolly=vp.y;if(tinymce.isOpera&&s.fullscreen_overflow=='visible')s.fullscreen_overflow='auto';if(tinymce.isIE&&s.fullscreen_overflow=='scroll')s.fullscreen_overflow='auto';if(tinymce.isIE&&(s.fullscreen_html_overflow=='visible'||s.fullscreen_html_overflow=='scroll'))s.fullscreen_html_overflow='auto';if(s.fullscreen_overflow=='0px')s.fullscreen_overflow='';f.setStyle(f.doc.body,'overflow','hidden');de.style.overflow='hidden';vp=f.getViewPort();f.win.scrollTo(0,0);if(tinymce.isIE)vp.h-=1;if(tinymce.isIE6)posCss='absolute;top:'+vp.y;else posCss='fixed;top:0';n=f.add(f.doc.body,'div',{id:'mce_fullscreen_container',style:'position:'+posCss+';left:0;width:'+vp.w+'px;height:'+vp.h+'px;z-index:200000;'});f.add(n,'div',{id:'mce_fullscreen'});tinymce.each(c.settings,function(v,n){s[n]=v});s.id='mce_fullscreen';s.width=n.clientWidth;s.height=n.clientHeight-15;s.fullscreen_is_enabled=true;s.fullscreen_editor_id=c.id;s.theme_advanced_resizing=false;s.save_onsavecallback=function(){c.setContent(tinyMCE.get(s.id).getContent());c.execCommand('mceSave')};tinymce.each(c.getParam('fullscreen_settings'),function(v,k){s[k]=v});if(s.theme_advanced_toolbar_location==='external')s.theme_advanced_toolbar_location='top';t.fullscreenEditor=new tinymce.Editor('mce_fullscreen',s);t.fullscreenEditor.onInit.add(function(){t.fullscreenEditor.setContent(c.getContent());t.fullscreenEditor.focus()});t.fullscreenEditor.render();t.fullscreenElement=new tinymce.dom.Element('mce_fullscreen_container');t.fullscreenElement.update();t.resizeFunc=tinymce.dom.Event.add(f.win,'resize',function(){var a=tinymce.DOM.getViewPort(),fed=t.fullscreenEditor,outerSize,innerSize;outerSize=fed.dom.getSize(fed.getContainer().firstChild);innerSize=fed.dom.getSize(fed.getContainer().getElementsByTagName('iframe')[0]);fed.theme.resizeTo(a.w-outerSize.w+innerSize.w,a.h-outerSize.h+innerSize.h)})}});c.addButton('fullscreen',{title:'fullscreen.desc',cmd:'mceFullScreen'});c.onNodeChange.add(function(a,b){b.setActive('fullscreen',a.getParam('fullscreen_is_enabled'))})},getInfo:function(){return{longname:'Fullscreen',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullscreen',version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add('fullscreen',tinymce.plugins.FullScreenPlugin)})();